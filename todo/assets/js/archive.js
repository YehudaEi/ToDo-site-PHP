/*! Todo list | https://yehudae.ga | (c) 2019 Yehuda Eisenberg | MIT License */ 

var AllData,TempMatala,API_URL="?api&method=";function init(){makeRequest("getArchive").then(t=>{AllData=t,buildMatalot()})}function getTagitClass(t){return"1"==t?"uk-label-success":"2"==t?"uk-label-warning":"3"==t?"uk-label-danger":"4"==t?"":void 0}function buildMatalot(){buildMatala("archive1"),buildMatala("archive2"),buildMatala("archive3")}function buildMatala(t){text="",AllData[t].forEach(t=>{text+='<div class="uk-margin" data-matalaid="'+t.id+'"><div class="uk-card uk-card-default uk-card-body uk-card-small uk-text-center" style="padding-top:7px !important;">',t.tagiot.length>0&&(text+='<div class="label-containter uk-text-left uk-accordion-content uk-overflow-auto">',t.tagiot.forEach(t=>{text+='<span class="uk-margin-small-left uk-label '+getTagitClass(t.type)+'">'+t.name+"</span>"}),text+="</div>"),text+='<ul uk-accordion="toggle: > .uk-accordion-title" class="">',text+="<li>",text+='<a class="uk-accordion-title uk-text-bold uk-overflow-auto" href="#">'+t.title+"</a>",text+='<div class="uk-accordion-content uk-overflow-auto">',text+="<p>"+t.description+"</p>",text+='<p class="uk-text-small uk-text-left">'+new Date(t.date).toLocaleString(),text+='<a href="#" title="שחזור" uk-icon="icon: push" onclick="unArchiveMatala('+t.id+')"></a>',text+='<a href="#" title="מחיקה" uk-icon="icon: trash" onclick="deleteMatala('+t.id+')"></a></p>',text+="</div></li></ul></div></div>"}),$("#"+t).html(text)}function deleteMatala(t){confirm("האם אתה בטוח שאתה רוצה למחוק את המטלה הזה?")&&makeRequest("delete",{id:t}).then(t=>{t.ok&&(UIkit.notification({message:"<span uk-icon='icon: check'></span> המטלה נמחקה",pos:"top-right"}),init())})}function unArchiveMatala(t){confirm("האם אתה בטוח שאתה רוצה לשחזר את המטלה הזה?")&&makeRequest("unArchive",{id:t}).then(t=>{t.ok&&(UIkit.notification({message:"<span uk-icon='icon: check'></span> המטלה שוחזרה",pos:"top-right"}),init())})}function makeRequest(t,a=""){return $.ajax({type:"post",url:API_URL+t,data:a,dataType:"json"})}$(()=>init());